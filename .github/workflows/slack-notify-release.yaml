name: Slack Notification - Release Published

on:
    release:
        types: [published]

jobs:
    notify-slack:
        runs-on: ubuntu-latest
        steps:
            - name: Send Slack notification
              uses: slackapi/slack-github-action@v1.27.0
              with:
                  webhook-url: ${{ secrets.SLACK_WEBHOOK_URL }}
                  webhook-type: incoming-webhook
                  payload: |
                      {
                        "text": "New Release Published",
                        "blocks": [
                          {
                            "type": "header",
                            "text": {
                              "type": "plain_text",
                              "text": "ðŸš€ New Release Published"
                            }
                          },
                          {
                            "type": "section",
                            "fields": [
                              {
                                "type": "mrkdwn",
                                "text": "*Author:*\n${{ github.event.release.author.login }}"
                              },
                              {
                                "type": "mrkdwn",
                                "text": "*Release:*\n${{ github.event.release.name }}"
                              },
                              {
                                "type": "mrkdwn",
                                "text": "*Tag:*\n${{ github.event.release.tag_name }}"
                              }
                            ]
                          },
                          {
                            "type": "section",
                            "text": {
                              "type": "mrkdwn",
                              "text": "*Release Notes:*\n${{ github.event.release.body }}"
                            }
                          },
                          {
                            "type": "actions",
                            "elements": [
                              {
                                "type": "button",
                                "text": {
                                  "type": "plain_text",
                                  "text": "View Release"
                                },
                                "url": "${{ github.event.release.html_url }}",
                                "style": "primary"
                              }
                            ]
                          }
                        ]
                      }
